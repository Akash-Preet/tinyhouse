# Module 8 Summary

In this module, we've introduced Apollo Client in our application and utilized the `useQuery` and `useMutation` Hooks available to us from the [React Apollo](https://github.com/apollographql/react-apollo) library.

### `src/index.ts`

In the `src/index.ts` file, we create a new Apollo client with the `ApolloClient` constructor given to us from the [`apollo-boost`](https://github.com/apollographql/apollo-client/tree/master/packages/apollo-boost) package. `apollo-boost` the approach to setting up an Apollo client with a predefined configuration and setup.

The only option we specify in the `ApolloClient` constructor is the `uri` option where we define the URL endpoint of our GraphQL API. We import the `<ApolloProvider>` component wrapper from React Apollo and wrap our `<Listings>` component with `<ApolloProvider>`. This helps us pass the Apollo client as the `client` prop of `ApolloProvider` which provides the Apollo client in our `<Listings>` component as part of context.

```tsx
import React from "react";
import { render } from "react-dom";
import ApolloClient from "apollo-boost";
import { ApolloProvider } from "@apollo/react-hooks";
import { Listings } from "./sections";
import * as serviceWorker from "./serviceWorker";

const client = new ApolloClient({
  uri: "/api"
});

render(
  <ApolloProvider client={client}>
    <Listings title="TinyHouse Listings" />
  </ApolloProvider>,
  document.getElementById("root")
);

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister();
```

### `<Listings>`

In the `<Listings>` component, we've imported the `useQuery` and `useMutation` Hooks from React Apollo.

```tsx
import { useQuery, useMutation } from "@apollo/react-hooks";
```

The functionality of how we use React Apollo's `useQuery` and `useMutation` Hooks is similar to how we've done in the use of our custom `useQuery` and `useMutation` Hooks.

The other significant change we've made is instead of creating and using custom types to describe the shape of data and variables in our GraphQL requests, we use the [Apollo CLI tooling](https://github.com/apollographql/apollo-tooling) to auto-generate these types from our GraphQL Schema. In the `package.json` file, we've created the `codegen:schema` and `codegen:generate` commands:

```json
    "codegen:schema": "npx apollo client:download-schema --endpoint=http://localhost:9000/api",
    "codegen:generate": "npx apollo client:codegen --localSchemaFile=schema.json --includes=src/**/*.tsx --target=typescript"
```

- The `codegen:schema` command creates a `schema.json` file that describes the shape of our GraphQL schema and places it in the root of our client project.
- The `codegen:generate` command autogenerates the types of our GraphQL requests and places them in a `__generated__/` folder within the folder the requests live.

We reference the autogenerated types in our `<Listings>` component and use them for each of our GraphQL requests.

### Moving Forward

Despite all the work we've done, we haven't made any presentable UI improvements to our `<Listings>` component. To make our application look better, we'll be introducing and using a React UI framework in the next module.
